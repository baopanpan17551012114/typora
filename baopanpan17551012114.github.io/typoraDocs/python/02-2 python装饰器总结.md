python装饰器总结

1、函数装饰器在导入模块时立即执行，而被装饰的函数只在明确调用时运行。这突出了 Python 程序员所说的导入时和运行时之间的区别。

2、Python 不要求声明变量，但是假定在函数定义体中赋值的变量是局部变量。如果在函数中赋值时想让解释器把 b 当成全局变量，要使用 global 声明。

3、Python闭包是一个嵌套函数，这个嵌套函数定义在一个外部函数内部，并访问外部函数的变量。

4、装饰器的典型行为：把被装饰的函数替换成新函数，二者接受相同的参数，而且（通常）返回被装饰的函数本该返回的值，同时还会做些额外操作。(装饰器模式：动态地给一个对象添加一些额外的职责。)

5、嵌套函数中nonlocal，对应非嵌套函数中global。

6、functools.lru_cache 是非常实用的装饰器，它实现了备忘功能。这是一项优化技术，它把耗时的函数的结果保存起来，避免传入相同的参数时重复计算。

7、多层嵌套函数实现了装饰器允许传参功能（register(active=False)(f)）。

8、装饰器最好通过实现 __call__ 方法的类实现，不应该通过函数实现。